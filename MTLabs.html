<!DOCTYPE html>
<html lang="en" class="scroll-smooth scroll-pt-20">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MTLabs | Moontrace Engineering</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="assets/finalbg.png" />

    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f9fafb;
        color: #1f2937;
      }
      h1, h2, h3, h4 {
        font-family: "Inter", sans-serif;
        color: #111827;
      }
      .hero-bg {
        position: relative;
        background-color: #090909;
        overflow: hidden;
      }
      #hero-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
      }
      .hero-content {
        position: relative;
        z-index: 1;
      }
      .hero-bg h1, .hero-bg p {
        color: #ffffff;
      }
      .sticky-nav {
        position: -webkit-sticky;
        position: sticky;
        top: 80px;
        z-index: 40;
        transition: top 0.3s;
      }
      .nav-link {
        position: relative;
        color: #4b5563;
        font-weight: 600;
        padding: 0.5rem 0.25rem;
        transition: color 0.3s;
        text-decoration: none;
      }
      .nav-link:hover {
        color: #111827;
      }
      .nav-link::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 0;
        height: 2px;
        background-color: #111827;
        transition: width 0.3s ease-in-out;
      }
      .nav-link.active::after {
        width: 100%;
      }
      .nav-link.active {
        color: #111827;
      }
      .card {
        background-color: white;
        border-radius: 0.75rem;
        border: 1px solid #e5e7eb;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.07), 0 1px 2px 0 rgba(0, 0, 0, 0.04);
        transition: transform 0.3s, box-shadow 0.3s;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
      }
      .animated-item {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
      }
      .animated-item.is-visible {
        opacity: 1;
        transform: translateY(0);
      }
      .footer-links-section {
        background-color: #000000;
        color: #cccccc;
        padding: 1.5rem 0;
        font-size: 0.875rem;
        border-top: 1px solid #222222;
      }
      .footer-links-section a {
        color: #cccccc;
        text-decoration: none;
        transition: color 0.2s ease-in-out;
      }
      .footer-links-section a:hover { color: #ffffff; }
      .footer-links-section ul {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1.5rem;
      }
      /* Modal Styles */
      .modal-backdrop {
        transition: opacity 0.3s ease-in-out;
      }
      .modal-content {
        transition: transform 0.3s ease-in-out;
      }

      /* Team Panel Backdrop */
      .team-panel-backdrop {
        transition: opacity 0.3s ease-in-out;
      }

      /* Custom line clamp for bio - removed as we're doing JS truncation */
      /* .line-clamp-4 {
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
        overflow: hidden;
      } */
    </style>
  </head>
  <body class="antialiased">
    <header id="header" class="bg-white/95 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200 h-16 md:h-20">
      <nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-full">
        <a href="index.html" class="flex items-center space-x-2">
          <div class="text-xl tracking-wider">
            <span class="font-bold text-black text-lg md:text-xl">MOONTRACE</span>
            <span class="font-normal text-red-600 text-base md:text-lg">|</span>
            <span class="font-normal text-gray-700 text-base md:text-lg">ENGINEERING</span>
          </div>
        </a>
        <div class="hidden md:flex items-center space-x-8">
            <button id="subscribe-button" class="bg-black text-white px-5 py-2.5 rounded-lg font-semibold text-sm hover:bg-gray-800 transition">Subscribe</button>
        </div>
        <button id="mobile-menu-button-main" class="md:hidden p-2 rounded-md text-gray-700 hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"/></svg>
        </button>
      </nav>
      <div id="mobile-menu-main" class="hidden md:hidden px-4 pb-4 space-y-2 bg-white/95 rounded-b-lg shadow-lg">
        <button id="subscribe-button-mobile" class="w-full bg-black text-white px-5 py-2.5 rounded-lg font-semibold text-sm hover:bg-gray-800 transition">Subscribe</button>
        <a href="index.html" class="block text-center text-gray-700 font-medium py-2 border-t mt-2">Back to Main Site</a>
      </div>
    </header>

    <main>
      <section id="home" class="hero-bg text-white">
        <canvas id="hero-canvas"></canvas>
        <div class="hero-content container mx-auto px-4 sm:px-6 lg:px-8 text-center py-24 md:py-32">
          <h1 class="text-4xl md:text-6xl font-black tracking-tight leading-tight">Welcome to MTLabs</h1>
          <p class="mt-6 max-w-3xl mx-auto text-lg md:text-xl">Our research and development wing, dedicated to pioneering the future of post-quantum and quantum-native solutions for the world's most critical industries.</p>
        </div>
      </section>

      <div class="sticky-nav bg-white/80 backdrop-blur-md border-b border-gray-200">
        <div class="container mx-auto px-2 sm:px-4 lg:px-8">
          <div class="flex justify-center items-center h-16">
            <nav class="flex space-x-6 md:space-x-10">
              <a href="#blog" class="nav-link text-sm md:text-base">Blog</a>
              <a href="#research" class="nav-link text-sm md:text-base">Research</a>
              <a href="#operations" class="nav-link text-sm md:text-base">Operations</a>
              <a href="#team" class="nav-link text-sm md:text-base">Team</a>
            </nav>
          </div>
        </div>
      </div>

      <section id="blog" class="py-20 bg-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center">
            <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">From the Lab</h2>
            <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Insights, tutorials, and news from the MTLabs team.</p>
          </div>
          <div class="mt-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
             <a href="assets/infographics/Quantcount.html" class="card overflow-hidden animated-item hover:shadow-xl transition-shadow duration-200 block">
               <img src="https://placehold.co/600x400/1a1a1a/FFFFFF?text=Quantum+Countdown" alt="Quantum Countdown infographic" class="w-full h-48 object-cover">
               <div class="p-8">
                 <h3 class="text-xl font-bold text-gray-900">The Quantum Countdown</h3>
                 <p class="mt-2 text-sm text-gray-500">Infographic • Updated 2025</p>
                 <p class="mt-4 text-gray-600">How long until quantum computers break today’s encryption? See the Y2Q countdown, battlefield constraints, and why lightweight PQC matters for defense.</p>
                 <span class="mt-6 inline-block font-semibold text-black hover:underline">Read More&rarr;</span>
               </div>
             </a>
             <a href="assets/infographics/Quantuminsights.html" class="card overflow-hidden animated-item hover:shadow-xl transition-shadow duration-200 block">
               <img src="https://placehold.co/600x400/000000/FFFFFF?text=Quantum+Insights" alt="Blog post image" class="w-full h-48 object-cover">
               <div class="p-8">
                 <h3 class="text-xl font-bold text-gray-900">Understanding the NIST PQC Finalists</h3>
                 <p class="mt-2 text-sm text-gray-500">July 28, 2025</p>
                 <p class="mt-4 text-gray-600">A high-level overview of the algorithms selected by NIST and what they mean for the future of digital security.</p>
                 <span class="mt-6 inline-block font-semibold text-black hover:underline">Read More &rarr;</span>
               </div>
             </a>
             <a href="assets/infographics/futurevis.html" class="card overflow-hidden animated-item hover:shadow-xl transition-shadow duration-200 block">
               <img src="https://placehold.co/600x400/1a1a1a/FFFFFF?text=Future+Vision" alt="Blog post image" class="w-full h-48 object-cover">
               <div class="p-8">
                 <h3 class="text-xl font-bold text-gray-900">The Road Ahead: Quantum-Resistant Healthcare</h3>
                 <p class="mt-2 text-sm text-gray-500">July 15, 2025</p>
                 <p class="mt-4 text-gray-600">Discussing the unique challenges and opportunities for implementing PQC to protect sensitive patient data for the long term.</p>
                 <span class="mt-6 inline-block font-semibold text-black hover:underline">Read More &rarr;</span>
               </div>
             </a>
          </div>
        </div>
      </section>

      <section id="research" class="py-20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center">
            <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">Featured Research</h2>
            <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Our foundational work in developing next-generation cryptographic solutions.</p>
          </div>
          <div class="mt-16 max-w-4xl mx-auto">
            <div class="card p-8 animated-item">
                <div class="grid md:grid-cols-3 gap-8 items-start">
                    <div class="md:col-span-1">
                        <img src="assets/team/r1.png" alt="Research Paper Cover" class="rounded-lg shadow-md w-full">
                    </div>
                    <div class="md:col-span-2">
                        <h3 class="text-2xl font-bold text-gray-900">Lightweight Post-Quantum Cryptography for Critical Embedded Systems</h3>
                        <p class="mt-2 text-sm text-gray-500">Authors: Dr. Hemraj S. Lamkuche, Bharat Raghuvanshi</p>
                        <p class="mt-4 text-gray-600">
                            <strong>Abstract:</strong> This research review addresses the development of lightweight PQC algorithms tailored for constrained environments. It analyzes the finalized NIST standards on embedded architectures like ARM Cortex-M4 and RISC-V, presenting benchmark data on speed and memory...
                        </p>
                        <div class="mt-4 border-t pt-4">
                            <h4 class="font-bold text-gray-800">Key Takeaways:</h4>
                            <ul class="list-disc list-inside mt-2 text-gray-600 space-y-1">
                                <li>Provides a comprehensive performance analysis of NIST PQC standards on embedded hardware.</li>
                                <li>Identifies sector-specific challenges and solutions for Defense, Health, and Finance.</li>
                                <li>Highlights the strategic importance of hardware-software co-design and crypto-agility.</li>
                            </ul>
                        </div>
                        <a href="assets/pdfs/Lightweight PQC for Embedded Systems  updated.pdf" target="_blank" class="mt-6 inline-block font-semibold text-black hover:underline">Read Review Paper &rarr;</a>
                    </div>
                </div>
            </div>
          </div>
        </div>
      </section>

      <section id="operations" class="py-20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center">
            <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">Current Operations</h2>
            <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">A look at the active projects and initiatives currently underway at MTLabs.</p>
          </div>
          <div class="mt-16 max-w-4xl mx-auto space-y-8">
            <div class="card p-8 animated-item">
                <h3 class="text-xl font-bold text-gray-900">Project Cerberus: Lightweight PQC for Resource Constraint Embedded Systems.</h3>
                <p class="mt-2 text-gray-600">Developing a suite of energy-efficient PQC algorithms for securing command-and-control communications for autonomous aerial vehicles in the defense sector.</p>
                <p class="mt-4 text-sm font-semibold text-blue-600 bg-blue-100 inline-block px-3 py-1 rounded-full">Status: Hardware Testing & Optimization Phase</p>
            </div>
            
          </div>
        </div>
      </section>
      
      <section id="team" class="py-20 bg-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center">
            <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl">Our Research Team</h2>
            <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Meet the minds behind our research and innovation.</p>
          </div>
          <div class="mt-16 flex flex-col md:flex-row justify-center items-center md:items-start gap-12">
              <!-- Team Member 1: Dr. Hemraj S. Lamkuche -->
              <div class="text-center animated-item cursor-pointer" data-member-id="hemraj">
                  <div class="p-2 bg-gray-200 rounded-lg shadow-md transform -rotate-3 hover:rotate-0 hover:scale-105 transition-transform duration-300 inline-block">
                      <img src="assets/team/p2.jpg" alt="Dr. Hemraj S. Lamkuche" class="w-40 aspect-[3/4] object-cover rounded-md border-4 border-white">
                  </div>
                  <h3 class="text-xl font-bold text-gray-900 mt-6">Dr. Hemraj S. Lamkuche</h3>
                  <p class="text-gray-500">Advisor & Lead Researcher</p>
                  <!-- Social links removed from here, now in side panel -->
              </div>
              <!-- Team Member 2: Bharat Raghuvanshi -->
              <div class="text-center animated-item cursor-pointer" data-member-id="bharat">
                  <div class="p-2 bg-gray-200 rounded-lg shadow-md transform rotate-3 hover:rotate-0 hover:scale-105 transition-transform duration-300 inline-block">
                      <img src="assets/team/p1.jpg" alt="Bharat Raghuvanshi" class="w-40 aspect-[3/4] object-cover rounded-md border-4 border-white">
                  </div>
                  <h3 class="text-xl font-bold text-gray-900 mt-6">Bharat Raghuvanshi</h3>
                  <p class="text-gray-500">Founder & Researcher</p>
                  <!-- Social links removed from here, now in side panel -->
              </div>
          </div>
        </div>
      </section>

      <section id="contact" class="py-20 bg-gray-900">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center">
            <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Collaborate With Us</h2>
            <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-300">We are actively seeking research partners, industry collaborators, and academic institutions to join us in solving the next generation of security challenges. If you are interested in working with MTLabs, please get in touch.</p>
          </div>
          <div class="mt-16 max-w-xl mx-auto animated-item">
            <div class="text-center space-y-4">
              <p class="text-lg text-gray-200">Contact our lead architect directly:</p>
              <p class="text-2xl font-bold text-white">Bharat Raghuvanshi</p>
              <p><a href="mailto:bharat.moontrace@gmail.com" class="text-lg text-gray-300 hover:text-white transition">bharat.moontrace@gmail.com</a></p>
              <p><a href="tel:+918887748365" class="text-lg text-gray-300 hover:text-white transition">+91 8887748365</a></p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="bg-gray-900 text-gray-400">
      <div class="footer-links-section text-center">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
          <ul class="mb-4">
            <li><a href="index.html#careers">Careers</a></li>
            <li><a href="https://github.com/MOONTRACE-ENGINEERING">GitHub</a></li>
            <li><a href="https://www.instagram.com/moontrace_hq/">Instagram</a></li>
            <li><a href="https://x.com/Moontrace_HQ">X</a></li>
            <li><a href="assets/pdfs/whymoon.pdf" target="_blank">Manifesto</a></li>
            <li><a href="assets/pdfs/Investor_policy.pdf">Investor Relations</a></li>
          </ul>
          <p>&copy; 2025 Moontrace Engineering Research and Consulting | All Rights Reserved.</p>
          <p class="mt-2">Built in India, for the World.</p>
          <p class="mt-4"><a href="#" class="hover:underline">Back to top</a></p>
        </div>
      </div>
    </footer>

    <!-- Subscription Modal -->
    <div id="subscription-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
        <div id="modal-backdrop" class="fixed inset-0 bg-black/50 modal-backdrop"></div>
        <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-md mx-auto p-8 relative transform scale-95">
            <button id="modal-close-button" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div class="text-center">
                <h3 class="text-2xl font-bold text-gray-900">Join Our Newsletter</h3>
                <p class="mt-2 text-gray-600">Stay updated on our progress, research, and plans. No spam, ever.</p>
            </div>
            <form id="subscription-form" class="mt-6 space-y-4">
                <div>
                    <label for="email" class="sr-only">Email address</label>
                    <input type="email" name="email" id="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-800 focus:border-transparent transition" placeholder="you@example.com" required>
                </div>
                <button type="submit" id="submit-form-button" class="w-full bg-black text-white px-5 py-3 rounded-lg font-semibold hover:bg-gray-800 transition">Subscribe</button>
            </form>
        </div>
    </div>

    <!-- Team Member Detail Panel Backdrop -->
    <div id="team-panel-backdrop" class="fixed inset-0 bg-black/50 z-40 hidden team-panel-backdrop opacity-0"></div>

    <!-- Team Member Detail Panel -->
    <div id="team-detail-panel" class="fixed inset-y-0 right-0 max-w-xl w-full bg-white shadow-lg z-50 transform translate-x-full transition-transform duration-300 ease-in-out overflow-y-auto">
        <div class="p-6 sm:p-8">
            <button id="close-panel-button" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300 rounded-full p-1">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div id="panel-content" class="pt-4">
                <div class="flex items-center mb-6">
                    <img id="panel-member-image" src="" alt="Team Member" class="w-40 h-auto aspect-[3/4] object-cover border-4 border-gray-200 mr-8">
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">TEAM MEMBER SPOTLIGHT</p>
                        <h3 id="panel-member-name" class="text-3xl font-bold text-blue-700 leading-tight"></h3>
                        <p id="panel-member-title" class="text-gray-600 text-lg"></p>
                        <div class="mt-2 flex space-x-4" id="panel-social-links">
                            <!-- LinkedIn icon will be inserted here by JS -->
                        </div>
                    </div>
                </div>

                <div class="mb-8">
                    <h4 class="text-lg font-bold text-gray-900 mb-2">About</h4>
                    <p id="panel-member-bio" class="text-gray-700 leading-relaxed"></p>
                    <button id="read-more-bio" class="text-blue-600 hover:underline font-semibold mt-2 hidden">Read More</button>
                </div>

                <div id="recommended-insights-section" class="mb-8 hidden">
                    <h4 class="text-lg font-bold text-gray-900 mb-4">Recommended Insights</h4>
                    <div id="insights-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- Insights will be dynamically loaded here -->
                    </div>
                </div>

                <div id="connect-button-container" class="mt-8">
                    <a id="connect-with-button" href="#" target="_blank" class="w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-bold rounded-md shadow-md text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200">
                        Connect with <span id="connect-button-name" class="ml-1"></span>
                        <svg class="ml-2 h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            <path fill-rule="evenodd" d="M4.293 15.707a1 1 0 010-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="teamMembers.js"></script> <!-- Link to your teamMembers.js file -->

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Main mobile menu toggle
        const mobileMenuButtonMain = document.getElementById("mobile-menu-button-main");
        const mobileMenuMain = document.getElementById("mobile-menu-main");
        mobileMenuButtonMain.addEventListener("click", () => {
          mobileMenuMain.classList.toggle("hidden");
        });

        // Intersection Observer for animations
        const animatedItems = document.querySelectorAll(".animated-item");
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
              entry.target.style.transitionDelay = `${index * 100}ms`;
              entry.target.classList.add("is-visible");
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        animatedItems.forEach(item => observer.observe(item));

        // Sticky nav active state on scroll
        const sections = document.querySelectorAll("main section[id]");
        const navLinks = document.querySelectorAll(".sticky-nav .nav-link");
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${id}`) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: "-100px 0px -50% 0px", threshold: 0 });
        sections.forEach(section => {
            if(section.id !== 'home') {
                sectionObserver.observe(section);
            }
        });

        // Subscription Modal Logic
        const modal = document.getElementById('subscription-modal');
        const openButtons = [document.getElementById('subscribe-button'), document.getElementById('subscribe-button-mobile')];
        const closeButton = document.getElementById('modal-close-button');
        const backdrop = document.getElementById('modal-backdrop');
        const form = document.getElementById('subscription-form');
        const submitButton = document.getElementById('submit-form-button');

        const openModal = () => {
            modal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
            setTimeout(() => {
                backdrop.classList.remove('opacity-0');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            }, 10);
        };

        const closeModal = () => {
            backdrop.classList.add('opacity-0');
            modal.querySelector('.modal-content').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.classList.remove('overflow-hidden');
            }, 300);
        };

        openButtons.forEach(btn => btn.addEventListener('click', openModal));
        closeButton.addEventListener('click', closeModal);
        backdrop.addEventListener('click', closeModal);

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            submitButton.textContent = 'Subscribing...';
            submitButton.disabled = true;

            fetch("https://formspree.io/f/mldlnjgk", {
                method: 'POST',
                body: formData,
                headers: { 'Accept': 'application/json' }
            }).then(response => {
                if (response.ok) {
                    submitButton.textContent = 'Subscribed!';
                    submitButton.classList.add('bg-green-600');
                    setTimeout(() => {
                        closeModal();
                        setTimeout(() => {
                            submitButton.textContent = 'Subscribe';
                            submitButton.classList.remove('bg-green-600');
                            submitButton.disabled = false;
                            form.reset();
                        }, 500);
                    }, 1500);
                } else {
                    // Using a custom message box instead of alert()
                    showMessageBox('Oops! There was a problem submitting your form.', 'error');
                    submitButton.textContent = 'Subscribe';
                    submitButton.disabled = false;
                }
            }).catch(error => {
                // Using a custom message box instead of alert()
                showMessageBox('Oops! There was a network error.', 'error');
                submitButton.textContent = 'Subscribe';
                submitButton.disabled = false;
            });
        });

        // Custom Message Box Function (replaces alert)
        function showMessageBox(message, type = 'info') {
            const messageBox = document.createElement('div');
            messageBox.classList.add('fixed', 'bottom-4', 'right-4', 'p-4', 'rounded-lg', 'shadow-lg', 'text-white', 'z-[999]');
            
            if (type === 'error') {
                messageBox.classList.add('bg-red-600');
            } else {
                messageBox.classList.add('bg-gray-800');
            }
            
            messageBox.textContent = message;
            document.body.appendChild(messageBox);

            setTimeout(() => {
                messageBox.remove();
            }, 3000); // Message disappears after 3 seconds
        }


        // Hero Animation
        const heroScene = new THREE.Scene();
        const heroCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const heroRenderer = new THREE.WebGLRenderer({ canvas: document.getElementById('hero-canvas'), alpha: true, antialias: true });
        heroRenderer.setSize(window.innerWidth, window.innerHeight);
        const mouse = new THREE.Vector2();
        window.addEventListener('mousemove', (event) => { mouse.x = (event.clientX / window.innerWidth) * 2 - 1; mouse.y = -(event.clientY / window.innerHeight) * 2 + 1; });
        const heroParticleCount = 500;
        const heroParticles = new THREE.BufferGeometry();
        const heroPositions = new Float32Array(heroParticleCount * 3);
        const heroParticleData = [];
        for (let i = 0; i < heroParticleCount; i++) {
            const x = (Math.random() - 0.5) * 20; const y = (Math.random() - 0.5) * 20; const z = (Math.random() - 0.5) * 20;
            heroPositions[i * 3] = x; heroPositions[i * 3 + 1] = y; heroPositions[i * 3 + 2] = z;
            heroParticleData.push({ originalX: x, originalY: y, originalZ: z, velocityX: (Math.random() - 0.5) * 0.01, velocityY: (Math.random() - 0.5) * 0.01, velocityZ: (Math.random() - 0.5) * 0.01 });
        }
        heroParticles.setAttribute('position', new THREE.BufferAttribute(heroPositions, 3));
        const heroParticleMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.05 });
        const heroParticleSystem = new THREE.Points(heroParticles, heroParticleMaterial);
        heroScene.add(heroParticleSystem);
        const heroLineMaterial = new THREE.LineBasicMaterial({ color: 0x87CEEB, transparent: true, opacity: 0.08 });
        const heroLineGeometry = new THREE.BufferGeometry();
        const heroLinePositions = new Float32Array(heroParticleCount * heroParticleCount * 3);
        heroLineGeometry.setAttribute('position', new THREE.BufferAttribute(heroLinePositions, 3));
        const heroLines = new THREE.LineSegments(heroLineGeometry, heroLineMaterial);
        heroScene.add(heroLines);
        heroCamera.position.z = 15;
        let heroTime = 0;
        function animateHero() {
            requestAnimationFrame(animateHero);
            heroTime += 0.005;
            const posArray = heroParticleSystem.geometry.attributes.position.array;
            const linePosArray = heroLines.geometry.attributes.position.array;
            let lineIndex = 0;
            const mouse3D = new THREE.Vector3(mouse.x * 10, mouse.y * 10, 0);
            for (let i = 0; i < heroParticleCount; i++) {
                const data = heroParticleData[i];
                const particlePos = new THREE.Vector3(posArray[i*3], posArray[i*3+1], posArray[i*3+2]);
                const distanceToMouse = particlePos.distanceTo(mouse3D);
                const pushStrength = Math.max(0, 1 - distanceToMouse / 5);
                const pushVector = particlePos.clone().sub(mouse3D).normalize().multiplyScalar(pushStrength * 0.1);
                posArray[i * 3] += Math.sin(heroTime + data.originalX) * 0.001 + data.velocityX + pushVector.x;
                posArray[i * 3 + 1] += Math.cos(heroTime + data.originalY) * 0.001 + data.velocityY + pushVector.y;
                posArray[i * 3 + 2] += data.velocityZ + pushVector.z;
                if (posArray[i * 3] > 10 || posArray[i * 3] < -10) data.velocityX *= -1;
                if (posArray[i * 3 + 1] > 10 || posArray[i * 3 + 1] < -10) data.velocityY *= -1;
                if (posArray[i * 3 + 2] > 10 || posArray[i * 3 + 2] < -10) data.velocityZ *= -1;
                for (let j = i + 1; j < heroParticleCount; j++) {
                    const dx = posArray[i * 3] - posArray[j * 3]; const dy = posArray[i * 3 + 1] - posArray[j * 3 + 1]; const dz = posArray[i * 3 + 2] - posArray[j * 3 + 2];
                    const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);
                    if (distance < 1.8) {
                        linePosArray[lineIndex++] = posArray[i * 3]; linePosArray[lineIndex++] = posArray[i * 3 + 1]; linePosArray[lineIndex++] = posArray[i * 3 + 2];
                        linePosArray[lineIndex++] = posArray[j * 3]; linePosArray[lineIndex++] = posArray[j * 3 + 1]; linePosArray[lineIndex++] = posArray[j * 3 + 2];
                    }
                }
            }
            heroLines.geometry.setDrawRange(0, lineIndex / 3);
            heroLines.geometry.attributes.position.needsUpdate = true;
            heroParticleSystem.geometry.attributes.position.needsUpdate = true;
            heroScene.rotation.y += 0.0001; heroScene.rotation.x += 0.0001;
            heroRenderer.render(heroScene, heroCamera);
        }
        animateHero();
        window.addEventListener('resize', () => { heroCamera.aspect = window.innerWidth / window.innerHeight; heroCamera.updateProjectionMatrix(); heroRenderer.setSize(window.innerWidth, window.innerHeight); });


        // Team Member Side Panel Logic
        const teamMembersContainer = document.querySelector('#team .flex');
        const teamDetailPanel = document.getElementById('team-detail-panel');
        const closePanelButton = document.getElementById('close-panel-button');
        const teamPanelBackdrop = document.getElementById('team-panel-backdrop'); // New backdrop

        const panelMemberImage = document.getElementById('panel-member-image');
        const panelMemberName = document.getElementById('panel-member-name');
        const panelMemberTitle = document.getElementById('panel-member-title');
        const panelSocialLinks = document.getElementById('panel-social-links'); // Container for social icons
        const panelMemberBio = document.getElementById('panel-member-bio');
        const readMoreBioButton = document.getElementById('read-more-bio'); // Read More button
        const insightsGrid = document.getElementById('insights-grid');
        const recommendedInsightsSection = document.getElementById('recommended-insights-section');
        const connectWithButton = document.getElementById('connect-with-button');
        const connectButtonName = document.getElementById('connect-button-name');
        const connectButtonContainer = document.getElementById('connect-button-container');

        let originalBioText = ""; // To store the full bio text

        const openTeamPanel = () => {
            teamDetailPanel.classList.remove('translate-x-full');
            teamPanelBackdrop.classList.remove('hidden');
            setTimeout(() => teamPanelBackdrop.classList.remove('opacity-0'), 10);
            document.body.classList.add('overflow-hidden'); // Prevent body scrolling
        };

        const closeTeamPanel = () => {
            teamDetailPanel.classList.add('translate-x-full');
            teamPanelBackdrop.classList.add('opacity-0');
            setTimeout(() => teamPanelBackdrop.classList.add('hidden'), 300); // Hide after transition
            document.body.classList.remove('overflow-hidden'); // Re-enable body scrolling
        };

        // Function to truncate text by word count
        function truncateWords(text, limit) {
            const words = text.split(' ');
            if (words.length > limit) {
                return words.slice(0, limit).join(' ') + '...';
            }
            return text;
        }

        // Event listener for clicks on the team members container
        teamMembersContainer.addEventListener('click', (event) => {
            const memberCard = event.target.closest('.animated-item');
            
            if (memberCard) {
                const memberId = memberCard.dataset.memberId;
                const member = window.teamMembers.find(m => m.id === memberId); // Access window.teamMembers

                if (member) {
                    panelMemberImage.src = member.image;
                    panelMemberName.textContent = member.name;
                    panelMemberTitle.textContent = member.title;
                    
                    originalBioText = member.bio; // Store the original full bio

                    // Handle Read More/Show Less for bio
                    const wordLimit = 100;
                    if (originalBioText.split(' ').length > wordLimit) {
                        panelMemberBio.textContent = truncateWords(originalBioText, wordLimit);
                        readMoreBioButton.classList.remove('hidden');
                        readMoreBioButton.textContent = 'Read More';
                    } else {
                        panelMemberBio.textContent = originalBioText;
                        readMoreBioButton.classList.add('hidden');
                    }

                    // Event listener for Read More button
                    readMoreBioButton.onclick = () => {
                        if (panelMemberBio.textContent.endsWith('...')) { // Check if currently truncated
                            panelMemberBio.textContent = originalBioText;
                            readMoreBioButton.textContent = 'Show Less';
                        } else {
                            panelMemberBio.textContent = truncateWords(originalBioText, wordLimit);
                            readMoreBioButton.textContent = 'Read More';
                        }
                    };


                    // Clear previous social links
                    panelSocialLinks.innerHTML = '';

                    // Add LinkedIn icon if available
                    if (member.linkedin) {
                        const linkedinLink = document.createElement('a');
                        linkedinLink.href = member.linkedin;
                        linkedinLink.target = '_blank';
                        linkedinLink.classList.add('text-gray-400', 'hover:text-gray-600', 'transition');
                        linkedinLink.innerHTML = '<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.225 0z"/></svg>';
                        panelSocialLinks.appendChild(linkedinLink);
                    }
                    // Add Google Scholar icon if available (can add more social icons here)
                    if (member.googleScholar) {
                        const scholarLink = document.createElement('a');
                        scholarLink.href = member.googleScholar;
                        scholarLink.target = '_blank';
                        scholarLink.classList.add('text-gray-400', 'hover:text-gray-600', 'transition', 'ml-4');
                        scholarLink.innerHTML = '<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M5.242 13.769L0 9.5L12 0l12 9.5l-5.242 4.269C17.548 11.249 14.978 9.5 12 9.5c-2.977 0-5.548 1.748-6.758 4.269zM12 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>';
                        panelSocialLinks.appendChild(scholarLink);
                    }

                    // Populate Recommended Insights
                    insightsGrid.innerHTML = ''; // Clear previous insights
                    if (member.insights && member.insights.length > 0) {
                        recommendedInsightsSection.classList.remove('hidden');
                        member.insights.forEach(insight => {
                            const insightCard = document.createElement('a');
                            insightCard.href = insight.link || '#'; // Fallback link
                            insightCard.target = '_blank';
                            insightCard.classList.add('block', 'border', 'border-gray-200', 'rounded-lg', 'overflow-hidden', 'hover:shadow-md', 'transition-shadow');
                            insightCard.innerHTML = `
                                <img src="${insight.image || 'https://placehold.co/600x400/eeeeee/333333?text=No+Image'}" alt="${insight.title}" class="w-full h-24 object-cover">
                                <div class="p-3">
                                    <h5 class="text-sm font-semibold text-gray-900 mb-1">${insight.title}</h5>
                                    <p class="text-xs text-gray-500">${insight.date || ''}</p>
                                    <p class="text-sm text-gray-600 mt-2 line-clamp-2">${insight.description || ''}</p>
                                </div>
                            `;
                            insightsGrid.appendChild(insightCard);
                        });
                    } else {
                        recommendedInsightsSection.classList.add('hidden'); // Hide section if no insights
                    }

                    // Populate Connect Button
                    if (member.connectLink && member.name) {
                        connectButtonContainer.classList.remove('hidden');
                        connectWithButton.href = member.connectLink;
                        // Use first name for "Connect with [First Name]"
                        connectButtonName.textContent = member.name.split(' ')[0]; 
                    } else {
                        connectButtonContainer.classList.add('hidden');
                    }

                    openTeamPanel();
                }
            }
        });

        // Event listener for the close button on the side panel
        closePanelButton.addEventListener('click', closeTeamPanel);

        // Event listener for the backdrop to close the panel
        teamPanelBackdrop.addEventListener('click', closeTeamPanel);
      });
    </script>
  </body>
</html>
